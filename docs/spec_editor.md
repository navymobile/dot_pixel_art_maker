# エディタ仕様 (Editor Specifications)

現在の `DotEditor` および `EditScreen` の仕様・機能一覧です。

---

## 1. キャンバス (Canvas)

**概要**
16x16 のピクセルアートを描画するメイン領域です。

**仕様**

- **解像度**: 16 x 16 ピクセル
- **グリッド**: ピクセルごとに薄いグレーのグリッド線を表示
- **背景**: 透明色を表現するために、薄いグレーで塗りつぶしを表示
- **操作**:
  - **タップ / ドラッグ**: 選択中のツール（ペンまたは消しゴム）でピクセルを塗る
  - **拡大表示**: 画面幅に合わせてアスペクト比 1:1 で最大表示

---

## 2. ツールバー (Toolbar)

**概要**
描画に必要なツールを切り替える操作エリアです。キャンバスの下に配置されています。

**機能一覧**

| アイコン | 名称 (Name)               | 説明                                                                                                                     |
| :------- | :------------------------ | :----------------------------------------------------------------------------------------------------------------------- |
| 💾       | **保存 (Save)**           | 現在のキャンバスの状態を保存します。保存完了時に「Saved!」と通知を表示します。                                           |
| 📷       | **読込 (Import)**         | カメラや写真ライブラリから画像を取り込み、ドット絵の「下絵」として生成します。(TBD)                                      |
| �        | **スポイト (Eyedropper)** | タップするとスポイトモードになり、キャンバス上のタップした箇所のピクセル色を抽出してペン色に設定します。                 |
| �🔵      | **ペン (Pen)**            | 色を塗るモードに切り替えます。アイコンの色は現在選択中の色を反映します。<br>タップすると **カラーピッカー** が開きます。 |
| 🧹       | **消しゴム (Eraser)**     | 色を消す（透明にする）モードに切り替えます。                                                                             |
| 🎨       | **バケツ (Fill)**         | タップしたピクセルと同じ色の連続領域を、現在選択中の色で塗りつぶします（Flood Fill）。                                   |
| ⭕       | **円周 (Circle)**         | ドラッグ開始点と現在の点を対角とする矩形に内接する円の「枠線」を描画します（中抜き）。                                   |
| 🗑️       | **全消去 (Clear)**        | キャンバスをすべてリセット（透明）にします。誤操作防止のため、クリア時の自動保存は行いません。                           |

---

## 3. カラーピッカー (Color Picker)

**概要**
任意の色を選択するためのダイアログです。

**仕様**

- **起動**: ペンツールをタップで表示
- **形式**: リング型ピッカー (HueRingPicker)
- **色空間**: RGB (不透明)。透明度 (Alpha) は選択不可。

---

## 4. パレット (Palette)

**概要**
よく使う色や履歴へ素早くアクセスするためのエリアです。ツールバーの下に配置されています。

**構成**

### A. グレースケール (Grayscale)

- **内容**: 白〜黒のモノトーン 8色
- **仕様**: 固定表示。変更不可。

### B. 履歴 (Recent Colors)

- **内容**: 最近使用した色 (最大32色)
- **仕様**:
  - **追加タイミング**: キャンバスに実際に色を塗った (Draw) 時に追加される（ピッカーで選んだだけでは追加されない）。
  - **更新ルール**: 新しい色が先頭に追加され、重複は移動、32色を超えると古い順に消える (LRU方式)。
  - **保存**: アプリ全体で共有・永続化される（Hive等のストレージを使用）。

---

## 5. 画面構成 (Edit Screen)

**概要**
エディタ全体を包む画面です。

**仕様**

- **ヘッダー (AppBar)**: タイトル「Editor」と、現在の世代数「Gen: X」を表示します。
- **レイアウト**:
  - 上部: キャンバス (Expanded)
  - 中部: ツールバー
  - 下部: パレット
- **保存挙動**: 自動保存は行わず、ユーザーが明示的に保存ボタンを押した時のみ保存処理を実行します。
